<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SolarSaving | Haryana Government</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
  body { background:#f5f7fb; }
  .header {
    background:#ffffff;
    border-bottom:4px solid #0b5ed7;
    padding:10px 0;
  }
  .hero {
    background: linear-gradient(135deg,#0b5ed7,#084298);
    color:#fff;
    padding:25px;
    border-radius:10px;
    margin-bottom:25px;
  }
  .card { border-radius:10px; }
  .result-box {
    background:#e7f1ff;
    border-left:5px solid #0b5ed7;
    padding:20px;
    border-radius:8px;
  }
  .saving {
    font-size:32px;
    font-weight:bold;
    color:#198754;
  }
  footer {
    background:#ffffff;
    border-top:2px solid #dee2e6;
    margin-top:40px;
    padding:15px;
    font-size:14px;
  }
</style>
</head>

<body>

<!-- HEADER -->
<div class="header">
  <div class="container d-flex align-items-center">
    <img src="https://haryana.gov.in/assets/haryana-logo.jpg"
         alt="Government of Haryana"
         style="height:60px; margin-right:15px;">
    <div>
      <h5 class="mb-0">Government of Haryana</h5>
      <small>SolarSaving ‚Äì Solar Benefit Calculator</small>
    </div>
  </div>
</div>

<div class="container my-4">

<!-- HERO -->
<div class="hero">
  <h3>‚òÄÔ∏è SolarSaving</h3>
  <p class="mb-1">
    Check how much money you saved using your solar system  
    based on your actual electricity bill.
  </p>
  <small>
    Transparent ‚Ä¢ Audit-safe ‚Ä¢ Citizen-friendly
  </small>
</div>

<!-- MODE -->
<div class="card p-3 mb-3">
  <label class="fw-bold">How do you want to enter bill data?</label>
  <select id="mode" class="form-select mt-2" onchange="toggleMode()">
    <option value="manual">‚úçÔ∏è Enter Bill Details Manually</option>
    <option value="scan">üì∑ Scan Electricity Bill (OCR)</option>
  </select>
</div>

<!-- IDENTIFICATION -->
<div class="card p-3 mb-3">
  <h5>üîç Consumer Identification</h5>

  <div class="row">
    <div class="col-md-6">
      <label>Meter Number</label>
      <input class="form-control" id="meter">
    </div>
    <div class="col-md-6">
      <label>Account Number</label>
      <input class="form-control" id="account">
    </div>
  </div>

  <div class="row mt-2">
    <div class="col-md-6">
      <label>Bill Number</label>
      <input class="form-control" id="billNumber">
    </div>
    <div class="col-md-6">
      <label>Circle / Sub Division</label>
      <input class="form-control" id="circle">
    </div>
  </div>
</div>

<!-- BILL PERIOD -->
<div class="card p-3 mb-3">
  <h5>üìÖ Bill Period</h5>
  <div class="row">
    <div class="col-md-6">
      <label>From</label>
      <input type="date" class="form-control" id="billFrom">
    </div>
    <div class="col-md-6">
      <label>To</label>
      <input type="date" class="form-control" id="billTo">
    </div>
  </div>
</div>

<!-- MANUAL -->
<div class="card p-3 mb-3" id="manualSection">
  <h5>‚ö° Consumption Details</h5>

  <div class="row">
    <div class="col-md-4">
      <label>Gross Units</label>
      <input type="number" class="form-control" id="gross">
    </div>
    <div class="col-md-4">
      <label>Import Units</label>
      <input type="number" class="form-control" id="import">
    </div>
    <div class="col-md-4">
      <label>Export Units</label>
      <input type="number" class="form-control" id="export">
    </div>
  </div>

  <div class="row mt-2">
    <div class="col-md-4">
      <label>Fixed Charges (‚Çπ)</label>
      <input type="number" class="form-control" id="fixed">
    </div>
    <div class="col-md-4">
      <label>Total Bill Amount (‚Çπ)</label>
      <input type="number" class="form-control" id="totalBill">
    </div>
    <div class="col-md-4">
      <label>Arrears + Late Fee (‚Çπ)</label>
      <input type="number" class="form-control" id="arrears" value="0">
    </div>
  </div>
</div>

<!-- EDIT -->
<div class="card p-3 mb-3">
  <input type="checkbox" id="isEdit"> This is a corrected / revised entry
  <textarea class="form-control mt-2" id="editReason"
            placeholder="Reason (if correction)"></textarea>
</div>

<button class="btn btn-primary w-100 btn-lg" onclick="submitData()">
  üí∞ Calculate My Solar Saving
</button>

<div id="result" class="result-box mt-4 d-none"></div>

</div>

<!-- FOOTER -->
<footer>
  <div class="container d-flex justify-content-between flex-wrap">
    <div>
      <strong>Developed & Maintained by:</strong><br>
      National Informatics Centre (NIC), Kurukshetra
    </div>
    <div class="text-end">
      Last Modified: <span id="lastModified"></span>
    </div>
  </div>
</footer>

<script>
function toggleMode(){
  const m = mode.value;
  manualSection.classList.toggle("d-none", m==="scan");
}

async function submitData(){
  const data = {
    mode: mode.value,
    meter: meter.value,
    account: account.value,
    billNumber: billNumber.value,
    circle: circle.value,
    billFrom: billFrom.value,
    billTo: billTo.value,
    gross: gross.value,
    import: import.value,
    export: export.value,
    fixed: fixed.value,
    totalBill: totalBill.value,
    arrears: arrears.value,
    isEdit: isEdit.checked ? "yes":"no",
    editReason: editReason.value
  };

  const res = await fetch("YOUR_N8N_WEBHOOK_URL",{
    method:"POST",
    headers:{ "Content-Type":"application/json"},
    body: JSON.stringify(data)
  });

  const html = await res.text();
  result.classList.remove("d-none");
  result.innerHTML = html;
}

// Last modified
document.getElementById("lastModified").innerText = document.lastModified;
</script>

</body>
</html>
